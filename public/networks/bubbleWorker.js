(()=>{"use strict";var t={r:t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}};t.r({});var r=function(t,r){return t-r},n=function(t,r){return t+r},e=function(t,r){return t%r>1?t-1:-1},u=function(t,r){return(t+1)%r>=0?t+1:-1},a=function(t,n){return e(r(t,n),n)},i=function(t,n){return u(r(t,n),n)},o=function(t,r){return e(n(t,r),r)},c=function(t,r){return u(n(t,r),r)},f=function(t,f){return[a,r,i,u,c,n,o,e].map((function(r){return r(t,f)}))},d=function(t,r){var n,e=[],u=[],a=t.length,i=0,o=function(){for(var n=function(r){return r>0&&0!==t[r]&&r<a};e.length;){var o=e.pop();if(!o)break;t[o]=0,u[i].add(o),f(o,r).forEach((function(t){n(t)&&e.push(t)}))}};for(n=0;n<a;n+=1)0!==t[n]&&(u[i]=new Set,e.push(n),o(),i+=1);return u},h=.3,l=function(t,r){return Math.floor(t/r)},s=function(t){return null!==t&&void 0!==t},v=function(t){var r=t.segments,n=t.width,e=t.scaleWidth,u=t.scaleHeight;return r.map((function(t){var r=Number.MAX_VALUE,a=Number.MAX_VALUE,i=Number.MIN_VALUE,o=Number.MIN_VALUE;t.forEach((function(t){var e=function(t,r){return[(n=t,e=r,n%e),l(t,r)];var n,e}(t,n);e[0]<r&&(r=e[0]),e[1]<a&&(a=e[1]),e[0]>i&&(i=e[0]),e[1]>o&&(o=e[1])}));var c=(i-r)*(o-a);return c>5&&c<500?{perimeter:c,x1:Math.trunc(r/h/e),y1:Math.trunc(a/h/u),x2:Math.trunc(i/h/e),y2:Math.trunc(o/h/u)}:null})).filter(s)},g=function(t,r,n){var e=function(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:120,e=1,u=t.width*t.height,a=new Uint8ClampedArray(u);for(r=0;r<u;r+=1){var i=r<<2;77*t.data[i+0]+151*t.data[i+1]+28*t.data[i+2]>>8<n&&(a[r]=e)}return a}(t);return v({segments:d(e,t.width),width:t.width,scaleWidth:r,scaleHeight:n})};onmessage=function(t){var r=t.data;if(r&&r.iData){var n=g(r.iData,r.resizedToBorderScaleWidth,r.resizedToBorderScaleHeight);postMessage({segments:n})}}})();